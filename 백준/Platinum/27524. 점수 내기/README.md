# [Platinum III] 점수 내기 - 27524 

[문제 링크](https://www.acmicpc.net/problem/27524) 

### 성능 요약

메모리: 538156 KB, 시간: 820 ms

### 분류

자료 구조, 문자열, 트리, 트라이

### 제출 일자

2024년 11월 6일 00:48:12

### 문제 설명

<p>아멜과 니나는 알파벳 소문자와 <strong>숫자 </strong>$\mathbf{0}$<strong>-</strong>$\mathbf{9}$를 이용하여 만든 문자열을 가지고 점수 내기를 하려고 한다. 아멜은 가장 높은 점수를 얻을 수 있는 문자열을 만들고, 니나는 가장 낮은 점수를 얻을 수 있는 문자열을 만든다. 아멜과 니나가 만드는 문자열은 길이가 $1$ 이상이어야 한다.</p>

<p>어떤 문자열 $A$의 점수는,</p>

<ul>
	<li>prefix list의 문자열 중 $A$의 prefix(접두사)인 것들의 점수 합</li>
	<li>suffix list의 문자열 중 $A$의 suffix(접미사)인 것들의 점수 합</li>
</ul>

<p>을 더한 값이다. 각 list에 조건을 만족하는 문자열이 없다면 $0$점으로 간주하여 계산한다. 또한 내기는 각 list가 비어있는 상태로 시작한다.</p>

<p>내기의 재미를 위해 prefix list와 suffix list가 계속 바뀌기 때문에, 아멜과 니나는 매 순간 어떤 문자열을 만들어야 가장 유리할지 헷갈리기 시작했다.</p>

<p>아멜과 니나를 도와 아래와 같은 쿼리를 수행해주자.</p>

<ul>
	<li><code>< str X</code>: prefix list에 점수 $X$를 가지는 문자열 <code>str</code>을 추가한다. 만일 <code>str</code>이 이미 있었다면 점수를 $X$로 변경한다.</li>
	<li><code>> str X</code>: suffix list에 점수 $X$를 가지는 문자열 <code>str</code>을 추가한다. 만일 <code>str</code>이 이미 있었다면 점수를 $X$로 변경한다.</li>
	<li><code>+</code>: 아멜이 얻을 수 있는 최대 점수를 출력한다.</li>
	<li><code>-</code>: 니나가 얻을 수 있는 최소 점수를 출력한다.</li>
</ul>

<p>list의 모든 문자열은 항상 알파벳 소문자로만 구성되어 있지만, 아멜과 니나는 알파벳 소문자뿐만 아니라 <strong>숫자</strong>도 사용할 수 있음에 유의하자.</p>

### 입력 

 <p>첫째 줄에 쿼리의 개수 $Q$가 주어진다. ($1\le Q \le 300\,000$)</p>

<p>둘째 줄부터 $Q$개의 줄에 걸쳐 쿼리가 한 줄에 하나씩 주어진다.</p>

<ul>
	<li>$-10^9 \le X \le 10^9$, $X$는 정수</li>
	<li>입력에 등장하는 모든 문자열은 길이가 $1$ 이상이며 알파벳 소문자로만 이루어졌다. <strong>(숫자 </strong>$\mathbf{0}$<strong>~</strong>$\mathbf{9}$<strong> 미포함)</strong></li>
	<li>입력에 등장하는 문자열의 길이 합은 $1\,000\,000$을 넘지 않는다.</li>
	<li><code>+</code> 또는 <code>-</code> 쿼리가 적어도 하나 존재한다.</li>
</ul>

### 출력 

 <p><code>+</code>와 <code>-</code> 쿼리에 대하여 결과를 한 줄에 하나씩 출력한다.</p>

